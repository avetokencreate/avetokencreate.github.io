import{_ as V,d as D,b as F,f as y,W as P,e as E,x as $,s as k,r as w,o as u,c as L,w as O,h as T,a as l,g as f,j as W,T as j,t as v,u as i,k as I,F as z}from"./index-5c83935c.js";import{u as R}from"./create-ebf80baf.js";import{g as N,f as q}from"./index-5b8a8efc.js";import{B as S}from"./bignumber-3e8dfdf6.js";const G={class:"chain-swap"},H=["onClick"],J={class:"left"},K={class:"swap-name"},M={class:"right"},Q={__name:"ChainSwaps",props:{showChainSwap:Boolean},emits:["update:showChainSwap"],setup(B,{emit:h}){const _=B,{t:m}=D(),b=F(),p=R(),r=y(""),c=y([]);P(()=>_.showChainSwap,(n,s)=>{n&&c.value.length==0&&C()}),C();const A=E(()=>r.value?c.value.filter(n=>n.showName.toLowerCase().indexOf(r.value.toLocaleLowerCase())!=-1):c.value);async function C(){c.value=[];let n=b.chain;if(n=="bsc_test")c.value=[{chain:"bsc",factoryAddress:"0x6725F303b657a9451d8BA641348b6761A6CC7a17",isSwapSupported:1,name:"cakev2",routerAddress:"0xd99d1c33f9fc3444f8101754abc46c52416550d1",showName:"PancakeSwapV2",sortId:1,swapUrl:"https://pancakeswap.finance/swap?inputCurrency=BNB&outputCurrency=",swapIcon:"https://www.avestorage.cloud/swap/cakev2.jpeg"}];else try{let s=await $.ave.getChainSwaps(n);if(s.data.status==1){let o=s.data.data;if(o&&o.length>0)for(let a of o){let d="https://www.avestorage.cloud/swap/"+a.name+".jpeg",t={chain:a.chain,factoryAddress:a.factory_address.toLowerCase(),isSwapSupported:a.is_swap_supported,name:a.name,routerAddress:a.router_address.toLowerCase(),showName:a.show_name,sortId:a.sort_id,swapUrl:a.swap_url,swapIcon:d};c.value.push(t)}console.log(c.value)}else k(m("unknowError"))}catch(s){s&&s.message?k(s.message):k(m("unknowError"))}finally{}}function g(n){p.chainSwap=n,h("update:showChainSwap",!1)}return(n,s)=>{const o=w("van-search"),a=w("van-icon"),d=w("van-action-sheet");return u(),L(d,{show:_.showChainSwap,"safe-area-inset-bottom":"",title:n.$t("selectSwap"),onClose:s[1]||(s[1]=t=>h("update:showChainSwap",!1)),onCancel:s[2]||(s[2]=t=>h("update:showChainSwap",!1))},{default:O(()=>[T(o,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),shape:"round",placeholder:n.$t("search"),clearable:""},null,8,["modelValue","placeholder"]),l("ul",G,[(u(!0),f(z,null,W(i(A),t=>(u(),f("li",{class:"swap-item",onClick:e=>g(t)},[l("div",J,[T(j,{class:"token-icon",tokenIcon:t.swapIcon},null,8,["tokenIcon"]),l("div",K,v(t.showName),1)]),l("div",M,[i(p).chainSwap&&i(p).chainSwap.factoryAddress==t.factoryAddress?(u(),L(a,{key:0,name:"success",color:"#3F80F7"})):I("",!0)])],8,H))),256))])]),_:1},8,["show","title"])}}},ue=V(Q,[["__scopeId","data-v-0555da15"]]);const X={class:"token-list"},Y=["onClick"],Z={class:"left"},x={class:"token-info"},ee={class:"token-name"},se={class:"token-address"},ae={class:"right"},oe={key:0,class:"amount"},te={class:"price"},ne={class:"icon"},ce={__name:"TokenList",props:{showTokenList:Boolean},emits:["update:showTokenList"],setup(B,{emit:h}){const _=B,{t:m}=D(),b=F(),p=R(),r=y(""),c=y([]);P(()=>_.showTokenList,(s,o)=>{s&&c.value.length==0&&g()}),g();const A=E(()=>r.value?r.value.startsWith("0x")?c.value.filter(s=>s.address.toLowerCase()==r.value.toLowerCase()):c.value.filter(s=>s.symbol.toLowerCase().indexOf(r.value.toLowerCase())>-1):c.value);function C(s){p.token=s,h("update:showTokenList",!1)}async function g(){let s=b.chain,o=[];if(s=="bsc_test")o=[{chain:"bsc",demical:18,name:"",symbol:"BNB",tokenAddress:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",currentPriceUsd:289.85489812433093,value:.0319133884,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee.png"},{chain:"bsc",demical:18,name:"Binance-Peg BSC-USD",symbol:"USDT",tokenAddress:"0x337610d27c682E347C9cD60BD4b3b107C9d34dDd",currentPriceUsd:.9970705187821386,value:0,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0x55d398326f99059ff775485246999027b3197955.png"},{chain:"bsc",demical:18,name:"Wrapped BNB",symbol:"WBNB",tokenAddress:"0xae13d989dac2f0debff460ac112a837c89baa7cd",currentPriceUsd:289.85489812433093,value:0,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c.png"}];else try{let a=await $.ave.getUserToken(s,b.walletAddress);if(console.log(a),a.data.status==1){let t=a.data.data.filter(e=>new RegExp("^0x.*$","gi").test(e.token)&&e.value>0&&e.risk_score<60&&e.risk_level>=0&&e.flag!=="blacklist"&&e.symbol!==""&&e.flag!=="lp").map(e=>({chain:e.chain,demical:e.decimals,name:e.name,symbol:e.symbol,tokenAddress:e.token.toLowerCase(),currentPriceUsd:e.current_price_usd,value:e.value,icon:N(e.chain.toLowerCase(),e.token.toLowerCase())}));o=o.concat(t)}else return;let d=await $.ave.getSwapTokens(s);if(console.log(d),d.data.status==1){let t=d.data.data.filter(e=>new RegExp("^0x.*$","gi").test(e.token)&&o.findIndex(U=>U.tokenAddress==e.token)==-1&&e.risk_score<60&&e.risk_level>=0&&e.flag!=="blacklist"&&e.symbol!==""&&e.flag!=="lp").map(e=>({chain:e.chain,demical:e.decimals,name:e.name,symbol:e.symbol,tokenAddress:e.token.toLowerCase(),currentPriceUsd:e.current_price_usd,value:e.value,icon:N(e.chain.toLowerCase(),e.token.toLowerCase())}));o=o.concat(t)}else return}catch(a){a&&a.message?k(a.message):k(m("unknowError")),o=[]}finally{}c.value=o}function n(){h("update:showTokenList",!1)}return(s,o)=>{const a=w("van-search"),d=w("van-icon"),t=w("van-action-sheet");return u(),L(t,{show:_.showTokenList,"safe-area-inset-bottom":"",title:s.$t("selectCurrency"),onClose:n,onCancel:n},{default:O(()=>[T(a,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),shape:"round",placeholder:s.$t("searchTokenOrName"),clearable:""},null,8,["modelValue","placeholder"]),l("ul",X,[(u(!0),f(z,null,W(i(A),e=>(u(),f("li",{class:"token-item",onClick:U=>C(e)},[l("div",Z,[T(j,{class:"token-icon",tokenIcon:e.icon},null,8,["tokenIcon"]),l("div",x,[l("div",ee,v(e.symbol),1),l("div",se,v(i(q)(e.tokenAddress)),1)])]),l("div",ae,[e.value>0?(u(),f("div",oe,[l("div",null,v(i(S)(e.value).toString().indexOf(".")==-1?i(S)(e.value):i(S)(e.value).toFixed(6)),1),l("div",te,"$"+v(i(S)(e.value).multipliedBy(e.currentPriceUsd).toFixed(2)),1)])):I("",!0),l("div",ne,[i(p).token&&i(p).token.tokenAddress==e.tokenAddress?(u(),L(d,{key:0,name:"success",color:"#3F80F7"})):I("",!0)])])],8,Y))),256))])]),_:1},8,["show","title"])}}},pe=V(ce,[["__scopeId","data-v-8bdf0bdc"]]);export{ue as C,pe as T};
