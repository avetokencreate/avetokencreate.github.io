import{_ as w,d as b,l as h,f as i,r as c,o as y,g as C,h as o,w as d,s as t,x as k,u as A,y as O,t as $}from"./index-871b4444.js";import{u as S}from"./manage-06af80e0.js";import{f as T}from"./index-bc1975f2.js";import"./bignumber-3e8dfdf6.js";import"./units-18e3b7c1.js";const V={class:"authority-transfer"},x={__name:"TransferOwnership",setup(F){const{t:s}=b(),a=S(),m=h(),l=i(a.owner),r=i(""),u=i(!1);a.$subscribe((e,n)=>{l.value=a.owner});async function _(){if(!/^0x[0-9a-fA-F]{40}(,\d*\.?\d+)?$/.test(r.value)){t(s("trueFormat"));return}if(r.value==l.value){t(s("transferConsistent"));return}u.value=!0;try{const e=await k.token.contract(a.tokenAddress,a.abi),n=await e.transferOwnership(r.value);t({type:"success",message:s("submitSuccess")}),await n.wait(),a.owner=await e.owner(),r.value="",t({type:"success",message:s("transferSuccess"),onClose:()=>{m.push("/manage/"+a.deployerId+"/"+a.tokenAddress)}})}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?t(s("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?t(s("userCancelOperate")):t(s("transferFail"))}finally{u.value=!1}}return(e,n)=>{const f=c("van-field"),p=c("van-cell-group"),v=c("van-button");return y(),C("div",V,[o(p,{inset:""},{default:d(()=>[o(f,{"model-value":A(T)(l.value),"label-width":"9.5em",disabled:"",label:e.$t("ownership"),"input-align":"right"},null,8,["model-value","label"])]),_:1}),o(p,{inset:""},{default:d(()=>[o(f,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=g=>r.value=g),label:e.$t("transferTo"),placeholder:e.$t("input"),"input-align":"right"},null,8,["modelValue","label","placeholder"])]),_:1}),o(v,{type:"primary",round:"",block:"",class:"btn",loading:u.value,onClick:_},{default:d(()=>[O($(e.$t("submit")),1)]),_:1},8,["loading"])])}}},L=w(x,[["__scopeId","data-v-964e49cf"]]);export{L as default};
